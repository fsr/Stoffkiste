\documentclass[a4paper]{article}
% For UTF-8 encoding
\usepackage[utf8]{inputenc}
% For reverse enumerations
\usepackage{etaremune}
% Fopr fancy figures
\usepackage{tikz}
% For curly braces in itemize
\usepackage{picture}
% For \underbrace, \text, etc.
\usepackage{amsmath}
% For \bfseries
\usepackage{array}
% For clickable links
\usepackage{hyperref}
% For description parameters
\usepackage{enumitem}
% For proper hyphenation etc.
\usepackage[german]{babel}
% For sine wave plots
\usepackage{pgfplots}
\pgfplotsset{compat=1.9}
% For ceil and floor symbols
\usepackage{mathtools}

% Set page margins
\usepackage[top=2cm, bottom=2cm, left=3cm, right=3cm]{geometry}

\usetikzlibrary{shapes, calc, decorations.pathreplacing, arrows, positioning}

\newcommand{\hs}[1]{\hspace{#1}}
\newcommand{\sphantom}{\vphantom{\text{/}}}
\newcommand{\PI}{3.14156}
\newcommand\mybox[2][]{\tikz[overlay]\node[fill=blue!20,inner sep=2pt, anchor=text, rectangle, rounded corners=1mm,#1] {#2};\phantom{#2}}
\newcommand{\host}{\mybox{\bf Host} }
\newcommand{\tub}[2]{$\underbrace{#1}_{#2}$}

\title{Rechnernetze Zusammenfassung}
\author{
    sgeisler\\\href{mailto:sgeisler@wh2.tu-dresden.de}{\tt sgeisler@wh2.tu-dresden.de} 
    \and
    chlewe\\\href{mailto:ch\_lewe@wh2.tu-dresden.de}{\tt ch\_lewe@wh2.tu-dresden.de}
}
\date{August 2017\\Version: \texttt{GITVERSION}}

\begin{document}

\maketitle
\section{Allgemeines}
\[
    K_n = (V, E) \hs{2mm} \Rightarrow \hs{2mm} |E| = \frac{n \cdot (n-1)}{2}
\]
\begin{description}
    \item[Dienst] Schnittstelle zwischen OSI-Schichten, definiert erbrachte Funktionalität einer Schicht.
    \item[Protokoll] Regeln zur Ablaufsteuerung von Kommunikation in einer Schicht.
\end{description}
\subsection{OSI-Schichten}
\begin{etaremune}
    \item Anwendungsschicht (RPC, FTP, E-Mail)
    \item Darstellungsschicht (ASCII, MP3, RSA)
    \makebox(0,0){\put(0,2.2\normalbaselineskip){%
               $\left.\rule{0pt}{2.2\normalbaselineskip}\right\}$ \shortstack{auch insgesamt als Anwendungsschicht\\ (Layer 5) bezeichnet}}}
    \item Sitzungsschicht (Transaktionshandling)
    \item Transportschicht (TCP, UDP)
    \item Vermittlungsschicht (IP)
    \item Sicherungsschicht (Ethernet)
    \item Bitübertragungsschicht (Umsetzung in elektrische Signale)
\end{etaremune}

\subsubsection{Effizienz}
\begin{minipage}{0.5\textwidth}
	\begin{tikzpicture}
			\node[text width=6cm] at (1,0) (b0) {Roh-Datenrate $b_0$ ($b_{gross}$)};
		\node[draw] at (0,0.5) (l1) {Layer 1};
			\node[text width=6cm] at (1,1) (b1) {Netzwerk-Datenrate $b_1$ ($b_{net}$)};
		\node[draw] at (0,1.5) (l2) {Layer 2};
			\node[text width=6cm] at (1,2) (b2) {Datendurchsatz $b_2$  ($b_{throughput}$)};
		\node[draw] at (0,2.5) (l3) {Layer 3};
			\node[text width=6cm] at (1,3) (b3) {Vermittlungs-Datenrate $b_3$  ($b_{Layer-3}$)};
		\node[draw] at (0,3.5) (l4) {Layer 4};
			\node[text width=6cm] at (1,4) (b3) {Transferrate $b_4$  ($b_{goodput}$)};
		\node[draw] at (0,4.5) (l5) {Layer 5};
	\end{tikzpicture}
\end{minipage}
\begin{minipage}{0.5\textwidth}
	$b_{gross}=125Mbit/s$ bei Ethernet\\
	$b_n=\eta_n \cdot b_{n-1}$
	
	Effizienzen:\\
	$\eta_1=80\%$\\
	$\eta_2=55-98\%$\\
	$\eta_3=57-99\%$\\
	$\eta_4=23-99\%$\\
\end{minipage}

\subsection{Sequenzdiagramme}
\begin{description}
    \item[Req:] Request, von Client gesendet
    \item[Ind:] Indication, von Server empfagener Request
    \vspace{2mm}
    \item[Rsp:] Response, von Server gesendet
    \item[Cnf:] Confirmation, von Client empfangene Response
\end{description}

\begin{minipage}{0.5\textwidth}
	\begin{tikzpicture}[node distance=2cm,auto,>=stealth']
	\node[] (B) {B};
	\node[left = of B] (A) {A};
	\node[below of=B, node distance=6cm] (b_ground) {};
	\node[below of=A, node distance=6cm] (a_ground) {};
	%
	\draw (A) -- (a_ground);
	\draw (B) -- (b_ground);
	\draw[->] ($(A)!0.05!(a_ground)$) node[left]{ConReq} -- ($(B)!0.08!(b_ground)$) node[right]{ConInd};
	\draw[<-] ($(A)!0.20!(a_ground)$) node[left]{DisInd} -- node[below,scale=1,midway]{*} ($(B)!0.15!(b_ground)$) node[right]{DisReq};
	\draw[->] ($(A)!0.30!(a_ground)$) node[left]{ConReq} -- ($(B)!0.35!(b_ground)$) node[right]{ConInd};
	\draw[<-] ($(A)!0.50!(a_ground)$) node[left]{ConCnf} -- ($(B)!0.45!(b_ground)$) node[right]{ConRsp};
	\draw[->] ($(A)!0.60!(a_ground)$) node[left]{DatReq} -- ($(B)!0.65!(b_ground)$) node[right]{DatInd};
	\draw[<-] ($(A)!0.75!(a_ground)$) node[left]{DatReq} -- ($(B)!0.80!(b_ground)$) node[right]{DatInd};
	\draw[->] ($(A)!0.90!(a_ground)$) node[left]{DisReq} -- ($(B)!0.95!(b_ground)$) node[right]{DisInd};
	\end{tikzpicture}
\end{minipage}
\begin{minipage}{0.5\textwidth}
	* Erster Verbindungsversuch von B abgelehnt.
\end{minipage}

\subsection{OSI-Schichtenarchitektur}
\begin{minipage}{0.75\textwidth}
    \begin{tikzpicture}[
        block/.style={rectangle, draw=black!50, thick, fill=blue!30},
        split/.style={rectangle split, rectangle split horizontal, rectangle split parts=2}
    ]
        \draw (0,0) -- (8, 0) -- (8, -8) -- (0, -8) -- (0,0);
        \draw[line width=1mm, dashed] (0, -3) -- (8, -3);
        \node[circle, minimum size=0.5, draw=black, fill=blue!30] (sap) at (4, -3) {SAP};
        \node[block, text width=2cm, text centered, split] (idu) at (4, -1.5) {
            ICI
            \nodepart{two} SDU
        };
        \draw[->, line width=0.5mm] (idu.south) -- (sap.north);
        \node[block, text width=2cm, text centered] (bici) at (2, -5) {ICI};
        \draw [->, line width=0.5mm] (sap.south west) -- (bici.north);
        \node[block, text width=2cm, text centered] (bsdu) at (6, -5) {SDU};
        \draw [->, line width=0.5mm] (sap.south east) -- (bsdu.north);

        \node[block, text width=2cm, text centered, split] (npdu) at ($(bsdu.south west) + (0,-1)$) {
            Header
            \nodepart{two} SDU
        };
        \draw[->, line width=0.5mm] (bsdu.south) -- (npdu.two north);

        \draw[decoration={brace,raise=2pt},decorate] (idu.north west) -- node[above=6pt] {IDU} (idu.north east);
        \draw[decoration={brace,raise=2pt, mirror},decorate] (npdu.south west) -- node[below=6pt] {N-PDU} (npdu.south east);

        \draw[decoration={brace,raise=4pt},decorate] (8,0) -- node[right=6pt] {Schicht $N+1$} (8,-2.95);
        \draw[decoration={brace,raise=4pt},decorate] (8,-3.05) -- node[right=6pt] {Schicht $N$} (8,-8);
    \end{tikzpicture}
\end{minipage}
\begin{minipage}{0.25\textwidth}
    \begin{description}[style=unboxed,leftmargin=0cm]
        \item[IDU:]\hfill\\Interface Data Unit
        \item[ICI:]\hfill\\Interface Control Information
        \item[SDU:]\hfill\\Service Data Unit
        \item[PDU:]\hfill\\Protocol Data Unit
        \item[SAP:]\hfill\\Service Access Point
    \end{description}
\end{minipage}


\section{Bitübertragungsschicht}
\subsection{IKT-Wiederholung}
\begin{align*}
    &\textbf{SNR:} && \text{Signal-Rausch-Abstand (\textit{S-R-Verhältnis})} \hs{1cm} && \textbf{B:} && \text{Bandbreite} \\
    &\textbf{SR:} && \text{Symbolrate (\textit{Baudrate, Schrittgeschw.})} \hs{1cm} && b \textbf{:} && \text{Bitrate (\textit{Datenrate, Übertragungsrate})} \\
    &\textbf{S:} && \text{Symbolstufen (\textit{Signalstufen})} \hs{1cm} && f_g \textbf{:} && \text{Grenzfrequenz} \\
    &\textbf{IG:} && \text{Informationsgehalt} \hs{1cm} && f_a \textbf{:} && \text{Abtastfrequenz}
\end{align*}
%
\begin{align*}
    \text{SNR}_{\text{dB}} &= 10 \cdot \log_{10}(\text{SNR}) \iff \text{SNR} = 10^{\frac{\text{SNR}_{\text{dB}}}{10}}\\
    \text{IG} &= \log_2(\text{S})\\
    \text{SR} &= \frac{b}{\log_2(S)}\\
    b &= f_a \cdot \log_2(S)
\end{align*}
\begin{description}
    \item[Abtast-Theorem:] $f_a > 2 \cdot f_g$
    \item[Nyquist-Theorem (\textit{,,Nyquist 1``}):] $b < 2B \cdot \log_2(\text{S})$
    \item[Erweiterung durch Shannon (\textit{,,Nyquist 2``}):] $b < B \cdot \log_2(1 + \text{SNR})$
\end{description}
%
\[
    b < \min \Big( 2B \cdot \log_2(S), \hs{2mm} B \cdot \log_2(1 + SNR) \Big) \hs{1cm}
    B > \max \Big( \frac{b}{2 \cdot \log_2(S)}, \hs{2mm} \frac{b}{\log_2(1+\text{SNR})} \Big)
\]

\subsection{Modulationsarten}
\begin{tikzpicture}
    \draw[line width=0.5mm, smooth, samples=100, domain=0:2.4*\PI] plot (\x,{0.3*sin(\x*10 r)+0.1}) node[right] {Trägerfrequenz};

    \draw[line width=0.5mm] (0,-1)--(0.4*\PI,-1)--(0.4*\PI,-0.6)--(0.8*\PI,-0.6)--(0.8*\PI,-1)--(1.6*\PI,-1)--(1.6*\PI,-0.6)--(2*\PI,-0.6)--(2*\PI,-1)--(2.4*\PI,-1) node[right] {Signal};

    \draw[line width=0.5mm, smooth, samples=100, domain=0:0.4*\PI] plot (\x,{0.3*sin(\x*10 r)-2});
    \draw[line width=0.5mm, smooth, samples=100, domain=0.4*\PI:0.8*\PI] plot (\x,{0.6*sin(\x*10 r)-2});
    \draw[line width=0.5mm, smooth, samples=100, domain=0.8*\PI:1.6*\PI] plot (\x,{0.3*sin(\x*10 r)-2});
    \draw[line width=0.5mm, smooth, samples=100, domain=1.6*\PI:2*\PI] plot (\x,{0.6*sin(\x*10 r)-2});
    \draw[line width=0.5mm, smooth, samples=100, domain=2*\PI:2.4*\PI] plot (\x,{0.3*sin(\x*10 r)-2}) node[right] {Amplitudenmodulation};

    \draw[line width=0.5mm, smooth, samples=100, domain=0:0.4*\PI] plot (\x,{0.3*sin(\x*10 r)-3.4});
    \draw[line width=0.5mm, smooth, samples=100, domain=0.4*\PI:0.8*\PI] plot (\x,{0.3*sin(\x*20 r)-3.4});
    \draw[line width=0.5mm, smooth, samples=100, domain=0.8*\PI:1.6*\PI] plot (\x,{0.3*sin(\x*10 r)-3.4});
    \draw[line width=0.5mm, smooth, samples=100, domain=1.6*\PI:2*\PI] plot (\x,{0.3*sin(\x*20 r)-3.4});
    \draw[line width=0.5mm, smooth, samples=100, domain=2*\PI:2.4*\PI] plot (\x,{0.3*sin(\x*10 r)-3.4}) node[right] {Frequenzmodulation};

    \draw[line width=0.5mm, smooth, samples=100, domain=0:0.8*\PI] plot (\x,{0.3*sin(\x*10 r)-4.8});
    \draw[line width=0.5mm, smooth, samples=100, domain=0.9*\PI:1.3*\PI] plot (\x-0.1*\PI,{0.3*sin(\x*10 r)-4.8});
    \draw[line width=0.5mm, smooth, samples=100, domain=1.2*\PI:2*\PI] plot (\x,{0.3*sin(\x*10 r)-4.8});
    \draw[line width=0.5mm, smooth, samples=100, domain=2.1*\PI:2.5*\PI] plot (\x-0.1*\PI,{0.3*sin(\x*10 r)-4.8}) node[right] {Phasenmodulation};

    \draw[dashed] (0,-1)--(0,-5.1);
    \draw[dashed] (0.4*\PI,-1)--(0.4*\PI,-5.1);
    \draw[dashed] (0.8*\PI,-1)--(0.8*\PI,-5.1);
    \draw[dashed] (1.2*\PI,-1)--(1.2*\PI,-5.1);
    \draw[dashed] (1.6*\PI,-1)--(1.6*\PI,-5.1);
    \draw[dashed] (2*\PI,-1)--(2*\PI,-5.1);
    \draw[dashed] (2.4*\PI,-1)--(2.4*\PI,-5.1);
\end{tikzpicture}

\subsubsection{Amplitudenmodulation}
\begin{itemize}
    \item Kodierung des Signals durch Variation der Amplitude
    \item Einfache Kodierung/Dekodierung
    \item Abstandsabhängige Amplitude $\Rightarrow$ störanfällig
\end{itemize}

\subsubsection{Frequenzmodulation}
\begin{itemize}
    \item Kodierung des Signals durch Variation der Frequenz
    \item Kompliziertere Kodierung/Dekodierung
    \item Weniger abstandsabhängig, dafür Dopplereffekt
\end{itemize}

\subsubsection{Phasenmodulation}
\begin{itemize}
    \item Kodierung des Signals durch Phasensprung bei 0, kein Phasensprung bei 1
    \item Komplizierte Kodierung/Dekodierung
    \item Weniger Störanfällig als FM und AM
\end{itemize}

\subsection{Leitungskodierung}
\subsubsection{Non-Return-to-Zero}
\begin{itemize}
    \item Kodiert jede 1 mit hohem Pegel, jede 0 mit niedrigem Pegel
    \item Netto-Datenrate = Bitrate (2 bit pro Periode)
\end{itemize}

\subsubsection{Non-Return-to-Zero Inverted / 4B5B}
\begin{minipage}{0.45\textwidth}
\begin{itemize}
    \item NRZI kodiert:
    \begin{description}
        \item[0:] keine Pegeländerung
        \item[1:] Pegeländerung
    \end{description}
    \item 4B/5B kodiert je 4~bit (Nibble) in 5~bit, nie mehr als 3 Nullen in Folge
\end{itemize}
\end{minipage}
\begin{minipage}{0.1\textwidth}
    \hfill
\end{minipage}
\begin{minipage}{0.45\textwidth}
    \begin{tikzpicture}[
        scale=0.9,
        bold/.style={font=\bf}
    ]
        \node[anchor=east, bold] at (-0.1,0.15) {Daten};
        \foreach \x [count = \xi] in {1,0,1,0, ,0,1,1,1, } {
            \node[bold] at (\xi*0.5, 0.15) {\x};
            \draw[dashed] (\xi*0.5-0.25,0)--(\xi*0.5-0.25,-2.2);
        };
        \foreach \x [count = \xi] in {1,0,1,1,0,0,1,1,1,1} {
            \node[bold] at (\xi*0.5, -0.8) {\x};
        };
        \draw[dashed] (5.25,0)--(5.25,-2.2);
        \node[anchor=east, bold] at (-0.1,-0.8) {4B5B};
        \node[anchor=east, bold] at (-0.1,-1.8) {NRZI};

        \draw[line width=0.5mm, draw=red]
        (0,-2.1)--(0.25,-2.1)--(0.25,-1.5)--(1.25,-1.5)-- %1,0
        (1.25,-2.1)--(1.75,-2.1)-- %1
        (1.75,-1.5)--(3.25,-1.5)-- %100
        (3.25,-2.1)--(3.75,-2.1)-- %1
        (3.75,-1.5)--(4.25,-1.5)-- %1
        (4.25,-2.1)--(4.75,-2.1)-- %1
        (4.75,-1.5)--(5.25,-1.5) %1
;
    \end{tikzpicture}
\end{minipage}
\begin{table}[ht]
    \centering
    \begin{tabular}{|c|c|c|c|c|c|c|c|}
        \hline
        0 & 1 & 2 & 3 & 4 & 5 & 6 & 7\\
        \hline
        0000 & 0001 & 0010 & 0011 & 0100 & 0101 & 0110 & 0111\\
        \hline
        11110 & 01001 & 10100 & 10101 & 01010 & 01011 & 01110 & 01111\\
        \hline\hline
        8 & 9 & A & B & C & D & E & F\\
        \hline
        1000 & 1001 & 1010 & 1011 & 1100 & 1101 & 1110 & 1111\\
        \hline
        10010 & 10011 & 10110 & 10111 & 11010 & 11011 & 11100 & 11101\\
        \hline
    \end{tabular}
    \label{tab:4b5b}
    \caption{4B5B Code}
\end{table}

\subsubsection{Einfache Manchesterkodierung}
\begin{samepage}
\begin{minipage}{0.5\textwidth}
    Nach G.E. Thomas (wie in Übung):
    \begin{description}
        \item[0:] steigende Flanke
        \item[1:] fallende Flanke
    \end{description}
    \vspace{5mm}
\end{minipage}
%
\begin{minipage}{0.05\textwidth}
    \hfill
\end{minipage}
%
\begin{minipage}{0.45\textwidth}
\begin{tikzpicture}[
        scale=0.9,
        bold/.style={font=\bf}
    ]
        \node[anchor=east, bold] at (-0.1,0.15) {Daten};
        \foreach \x [count = \xi] in {1,0,1,0,0,1,1,1,0} {
            \node[bold] at (\xi*0.5, 0.15) {\x};
            \draw[dashed] (\xi*0.5-0.25,0)--(\xi*0.5-0.25,-1.2);
        };
        \draw[dashed] (4.75,0)--(4.75,-1.2);
        \node[anchor=east, bold] at (-0.1,-0.8) {Kodierung};
        \draw[line width=0.5mm, draw=red]
            (0.25,-0.5)--(0.5,-0.5)--(0.5,-1.1)--(1,-1.1)-- %1
            (1,-0.5)--(1.5,-0.5)-- %0
            (1.5,-1.1)--(2,-1.1)-- %1
            (2,-0.5)--(2.25,-0.5)-- %0
            (2.25,-1.1)--(2.5,-1.1)--(2.5,-0.5)--(3,-0.5)-- %1
            (3,-1.1)--(3.25,-1.1)-- %1
            (3.25,-0.5)--(3.5,-0.5)--(3.5,-1.1)--(3.75,-1.1)-- %1
            (3.75,-0.5)--(4,-0.5)--(4,-1.1)--(4.5,-1.1)--(4.5,-0.5)--(4.75,-0.5); %0
    \end{tikzpicture}
\end{minipage}
Der IEEE 802.3 Standard beschreibt genau die invertierte Form der hier beschriebenen Manchesterkodierung.

Bei Manchestercodierung entspricht die Übertragungsrate nur noch der Hälfte der Signalrate.
\end{samepage}

\subsubsection{Differentielle Manchesterkodierung}
\begin{samepage}
\begin{minipage}{0.5\textwidth}
    In der Mitte jeder Zeiteinheit findet eine Pegeländerung statt. Der Datenstrom wird wie folgt kodiert:
    \begin{description}[style=unboxed,leftmargin=0cm]
        \item[0:] eine weitere Pegeländerung findet am Anfang der Zeiteinheit statt
        \item[1:] keine weitere Pegeländerung
    \end{description}
\end{minipage}
%
\begin{minipage}{0.05\textwidth}
    \hfill
\end{minipage}
%
\begin{minipage}{0.45\textwidth}
    \begin{tikzpicture}[
        scale=0.9,
        bold/.style={font=\bf}
    ]
        \node[anchor=east, bold] at (-0.1,0.15) {Daten};
        \foreach \x [count = \xi] in {1,0,1,0,0,1,1,1,0} {
            \node[bold] at (\xi*0.5, 0.15) {\x};
            \draw[dashed] (\xi*0.5-0.25,0)--(\xi*0.5-0.25,-1.2);
        };
        \draw[dashed] (4.75,0)--(4.75,-1.2);
        \node[anchor=east, bold] at (-0.1,-0.8) {Kodierung};
        \draw[line width=0.5mm, draw=red]
            (-0.01,-1.1)--(0.5,-1.1)--(0.5,-0.5)--(0.75,-0.5)--(0.75,-1.1) %1
            (0.75,-1.1)--(1,-1.1)--(1,-0.5)--(1.5,-0.5) %0
            (1.5,-0.5)--(1.5,-1.1)--(1.75,-1.1) %1
			(1.75,-1.1)--(1.75,-0.5)--(2.0,-0.5)--(2.0,-1.1)--(2.25,-1.1) %0
			(2.25,-1.1)--(2.25,-0.5)--(2.5,-0.5)--(2.5,-1.1) %0
			(2.5,-1.1)--(3.0,-1.1)--(3.0,-0.5) %1
			(3.0,-0.5)--(3.5,-0.5)--(3.5,-1.1) %1
			(3.5,-1.1)--(4.0,-1.1)--(4.0,-0.5)--(4.25,-0.5) %1
			(4.25,-0.5)--(4.25,-1.1)--(4.5,-1.1)--(4.5,-0.5)--(4.75,-0.5); %0
    \end{tikzpicture}
\end{minipage}

\vspace{5mm}
Durch Leitungskodierungen wie z.B. die Manchesterkodierung können Fehler erkannt, Gleichstromanteile vermieden und der Takt rückgewonnen werden.
\end{samepage}


\subsection{Multiplexing}
\begin{description}
    \item[Synchrones Zeitmultiplexing:] Jeder Teilnehmer besitzt fest zugeordnete Zeitintervalle in denen er Nachrichten senden kann
    \item[Asynchrones Zeitmultiplexing:] ebenfalls feste Zeitabschnitte. Benötigt ein Teilnehmer seinen Abschnitt nicht, kann dieser von einem anderen Teilnehmer genutzt werden. Die Nachrichten werden zur Kanalzuordnung mit Channel Identifier getaggt
    \item[Frequenzmultiplexing:] Die Teilnehmer senden mit verschiedenen Trägerfrequenzen
\end{description}

\section{Sicherungsschicht}
Die Sicherungsschicht ist für \textit{Medium Access Control} (MAC; Medienzugriff) und \textit{Logical Link Control} (LLC; Flusskontrolle, Rahmenbildung und Fehlerüberprüfung).

\subsection{Fehlererkennung und -korrektur}
\begin{description}
    \item[Gerades Paritätsbit:] $\sum_i d_i \mod 2 = p$ mit $d_1, \dots, d_n$ Datenbits und $p$ Paritätsbit
    \item[Ungerades Paritätsbit:] Letztes Bit wird beim Senden so angefügt, dass insgesamt ungerade Anzahl Einsen vorhanden ist.
    \item[Hamming-Distanz $d$:] Zwichen zwei Bitfolgen $a, b$: Zahl der Bitflips um aus $a$ $b$ zu machen. Einer Menge an Bitfolgen: minimum aller paarweisen Hamming-Distanzen.
    \item[Erkennbare Fehler:] $f_e = d_{min}-1$
    \item[Korrigierbare Fehler:] $f_k = \left\lfloor \frac{d_{min}-1}{2} \right\rfloor$
    \item[Kreuzsicherung] Je eine Spalte und eine Zeile einer Matrix mit Paritätsbit ermöglichen Fehlererkennung in einer Matrix.
    \item[Cycling Redundancy Check (CRC)] r = grad g(x), $r$ mal Bit 0 an Datenpolynom $P_D$ anhängen, $P_D~0^r : g(x)$ (XOR) $=>$ Rest auf $P_D x^r$ addieren = Sendesequenz $P_E$ \\Kontrolle: $P_E$ : g(x) mit Rest = 0 $=>$ korrekte Übertragung
\end{description}


\subsection{Medienzugriff}
\begin{description}
    \item[(\textit{Pure}) ALOHA] Man sendet sofort wenn man kann.
    %
    \item[Slotted ALOHA] Man darf nur zu Beginn eines Zeitslots senden. Ansonsten muss man warten.
    %
    \begin{samepage}
    \item[CSMA (\textit{Carrier-sense multiple access})] \hfill \\
    \textbf{$p$-persistent CSMA}
    \begin{enumerate}
        \item Warte auf den nächsten Zeitslot
        \item Lausche, ob andere gerade senden
        \item Falls nicht, dann sende mit der Wahrscheinlichkeit $p$
        \item Gehe zu 1.
    \end{enumerate}
    %
    \textbf{non-persistent CSMA}
    \begin{enumerate}
        \item Lausche, ob andere gerade senden
        \item Falls nicht, dann sende und gehe zu 1.
        \item Warte eine zufällige Dauer und gehe zu 1.
    \end{enumerate}
    \end{samepage}
\end{description}
%
\begin{samepage}
\begin{description}
    \item[CSMA/CD (\textit{Carrier-sense multiple access with collision detection})] \hfill \\[8pt]
        Wie \textit{non-persistent CSMA}, nur dass beim Senden (2.) eine Kollisionserkennung geschieht:
        \begin{enumerate}[label=(\roman*)]
        \item Lausche, ob andere auch senden
        \item Falls ja, dann sende ab sofort das \textit{Jam-Signal} anstatt dem Frame bis die Mindestframelänge erreicht ist; danach gehe zu 3.
        \item Gehe zu (i)
    \end{enumerate}
    Das Jam-Signal sorgt dafür, dass der CRC des Frames bei allen Empfängern fehlschlägt. Sendezeit für einen Rahmen muss mindestens $2\tau$ betragen.
\end{description}
\end{samepage}
\begin{figure}[ht]
    \centering
    \begin{tikzpicture}[
        gr/.style={line width=0.4mm, font=\bf\footnotesize},
        scale=0.8
    ]
        \path[use as bounding box] (0,-1) rectangle (14,8.5);
        \draw[very thin,color=black!10] (-0.1,-0.1) grid (14,8.5);
        \draw[line width=0.8mm,->] (0,0)--(0,8.5) node[below left=3 and 0.5, fill=white] {\rotatebox{90}{\footnotesize Auslastung [\%]}};
        \foreach \y in {0,10,...,80} {
            \node at (-0.4,0.1*\y) {\footnotesize\y};
        };

        \draw[line width=0.8mm,->] (0,0)-- node[below=0.5] {\footnotesize Last bezogen auf Kanaldatenrate [\%]} (14,0);
        \foreach \x in {0,10,...,130} {
            \node at (0.1*\x,-0.4) {\footnotesize\x};
        };

        \draw[gr] (0,0) .. controls (4,4) and (3,0) .. node[right=0.3, align=center] {Pure\\ALOHA} (6,0);
        \draw[gr] (0,0) .. controls (6 ,8) and (5,0) .. node[right=0.3, align=center] {Slotted\\ALOHA} (10,0);
        \draw[gr] (0,0) .. controls (9,13) and (6,0) .. node[below right=1 and 0.8, align=center] {1-persistent\\CSMA} (12,0);
        \draw[gr] (0,0) .. controls (12,18) and (8,0) .. node[below right=2.5 and 1.1, align=center] {0.5-persistent\\CSMA} (13.5,0);
        \draw[gr] (0,0) .. controls (5,8) and (12,6) .. node[above right=0 and 2.25, align=center] {non-persistent\\CSMA} (14,5.5);
    \end{tikzpicture}
    \caption{Performacevergleich verschiedener MAC-Protokolle}
\end{figure}

\subsection{Ethernet}
{
\renewcommand{\arraystretch}{1.5}
    \begin{tabular}{l|c|l|l|l}
        \textbf{Standard} & \textbf{Geschwindigkeit} & \textbf{Mindestframelänge} & \textbf{SDL} & \textbf{IFG} \\
        \hline
        Ethernet & $10\frac{\text{Mbit}}{\text{s}}$ & 64 Oktette & 8 Oktette & 47 Bit\\
        Fast Ethernet & $100\frac{\text{Mbit}}{\text{s}}$ & 64 Oktette & 8 Oktette & 12 Oktette \\
        Gigabit Ethernet & $1\frac{\text{Gbit}}{\text{s}}$ & 512 Oktette & 8 Oktette & 8 Oktette \\
        10-Gigabit Ethernet & $10\frac{\text{Gbit}}{\text{s}}$ & 512 Oktette, kein CSMA/CD & 8 Oktette & 5 Oktette
    \end{tabular}
}
%
\hfill \\
\textit{SDL: Start Delimiter; IFG: Interframe Gap} \\
\textit{Ethernet nutzt CSMA/CD (außer 10-Gigabit Ethernet}) \\
%
\begin{description}[style=unboxed,leftmargin=0cm]
    \item[Ethernet-Paket (Layer 1) mit Ethernet-Frame (Layer 2)] \hfill \\[8pt]
    \begin{tikzpicture}[
        block/.style={rectangle, draw=black!50, thick, align=center, font=\tiny},
        node distance=-\pgflinewidth,
    ]
        \node[block, fill=black!10] (start) {Start Delimiter\\(8 Oktette)};
        \node[right=of start, block] (dstmac) {Dst MAC\\(6 Oktette)};
        \node[right=of dstmac, block] (srcmac) {Src MAC\\(6 Oktette)};
        \node[right=of srcmac, block] (tag) {802.1Q VLAN Tag (i)\\(4 Oktette)};
        \node[right=of tag, block] (len) {EtherType/Size (ii)\\(2 Oktette)};
        \node[right=of len, block] (data) {Payload\\(46-1500 Oktette)};
        \node[right=of data, block] (crc) {CRC\\(4 Oktette)};
        \node[right=of crc, block, fill=black!10] (ifg) {Interframe Gap\\(12 Oktette)};
        %
        \draw[decoration={brace,raise=4pt, mirror},decorate] (dstmac.south west) -- node[below=6pt] {Layer 2 = Ethernet-Frame} (crc.south east);
        \draw[decoration={brace,raise=4pt, mirror},decorate] (start.south west) -- node[below=6pt] {Layer 1} ($(start.south east) + (-0.1,0)$);
        \draw[decoration={brace,raise=4pt, mirror},decorate] ($(ifg.south west) + (0.1,0)$) -- node[below=6pt] {Layer 1} (ifg.south east);
        \draw[decoration={brace,raise=4pt},decorate] (start.north west) -- node[above=6pt] {Ethernet-Paket} (ifg.north east);
    \end{tikzpicture}
\end{description}
%
\begin{enumerate}[label=(\roman*)]
    \item VLAN-Tag ist optional
    \item EtherType/Size $\leq 1500$: Länge des Payloads in Bytes \\
        EtherType/Size $\geq 1536$: Typ des Frames \footnote{Die Lücke zwischen 1500 und 1536 ist kein Tippfehler und hat technische sowie historische Gründe.}
\end{enumerate}
\bigskip
%
\begin{description}
    \item[Kabel-Standards (10-Mbit-Ethernet)] \hfill
    \begin{itemize}
        \item Bis zu 500m physische Kabellänge
        \item Bis zu 4 Repeater (bis zu 2500m logische Kabellänge)
    \end{itemize}
    %
    \item[Maximale Framelängen] \hfill
    \begin{itemize}
        \item Bis zu 1518 Bytes lange Frames (14 Bytes Header, 1500 Bytes Payload, 4 Bytes CRC)
        \item Jumborahmen: z.B. bis zu 8192 Bytes lange Frames
    \end{itemize}
    %
    \item[Transparent Bridging] Layer-2-Switches speichern Switching-Tabellen, in denen MACs auf Ports abgebildet werden. Kreise im Netz führen zum Endlos-Switching.
    \begin{enumerate}
        \item Frame kommt an Port $i$ an
        \item Falls \textit{Src-MAC} noch nicht in Tabelle ist: Bilde sie auf Port $i$ ab
        \item Falls \textit{Dst-MAC} in Tabelle ist: Sende Frame über den eingetragenen Port $j$; gehe zu 1.
        \item Sende Frame über alle Ports außer Port $i$ (\textit{Flooding}); gehe zu 1.
    \end{enumerate}
    %
    \item[Ethernet Flow Control] Wenn der sendende Computer schneller überträgt, als der Empfänger aufnehmen kann, werden Pause-Frames übertragen.
    %
    \item[Store-and-forward Switching] Die Switch puffert den gesamten Frame, überprüft die Prüfsumme (CRC) und sendet bei Erfolg den Frame weiter. Ansonsten wird er verworfen.
    %
    \item[Cut-through Switching] Die Switch puffert den Frame bis die Dst-MAC gelesen wurde und sendet ihn anschließend sofort weiter. Pro Switch verzögert sich die Übertagung um die Übertagungszeit des Headers (Start Delimiter, Dst MAC). Fehler werden erst beim Empfänger erkannt, aber die Übertragung ist schneller.
    %
    \item[Spanning Tree Protocol] Kreise im Netz werden ausfindig gemacht und durch Portabschaltungen aufgelöst.
\end{description}

\subsection{Funktechnologien}
\begin{tabular}{l|c|c}
    & WiMAX & WLAN (IEEE 802.11) \\ \hline
    Gemeinsamkeiten & \multicolumn{2}{c}{OFDM} \\
    & \multicolumn{2}{c}{MIMO} \\ \hline
    Reichweite & weit & nah \\
    Anzahl Nutzer & hoch & gering \\
    Sendeleistung & hoch & gering \\
    Medienzugriffsverfahren & sehr effizient & weniger effizient
\end{tabular}

\begin{description}
    \item[OFDM (\textit{Orthogonal frequency-division multiplexing})] Digitaler Datenstrom wird auf mehreren Trägerfrequenzen übertragen.
    %
    \item[MIMO (\textit{Multiple-input and multiple-output})] Nutzung von n Sende- und n Empfangsantennen pro Gerät für n-fache Kanalkapazität. Hardwarekosten steigen durch komplizierte Kanalmatrixberechnung.
\end{description}

\subsection{Resilient Packet Ring (RPR)}
Ein RPR besteht aus Teilnehmern, die über zwei gegenläufige, gerichtete Ringe verbunden sind. Das Netzwerk ist auch bei Ausfall einiger Verbindungen weiterhin funktionsfähig.
\bigskip \\
Eine Übertragung blockiert den gesamten Pfad. Ist dieser noch nicht frei, muss gewartet werden bis er frei wird. Es sind mehrere Übertragungen gleichzeitig möglich (\textit{spatial reuse}).

\subsection{Carrier Ethernet}
Um zwischen verschiedenen Standorten (z.B. größere Firmen) mehrere getrennte Layer 2 Netzwerke zu tunneln, muss auch das Tunneln mehrerer VLANs möglich sein. Dies kann per Q-in-Q (äußere und innere VLAN-ID) oder MAC-in-MAC (ein Ethernetframe in ein anderes Ethernetpaket einpacken) geschehen.

\begin{figure}[ht]
\begin{minipage}[b]{0.45\textwidth}
    \begin{tikzpicture}[
            block/.style={rectangle, draw=black!50, thick, align=center, font=\tiny, minimum height=0.8cm},
            node distance=-\pgflinewidth,
        ]
            \node[block] (dstmac) {Dst\\MAC};
            \node[right=of dstmac, block] (srcmac) {Src\\MAC};
            \node[right=of srcmac, block] (tag) {802.1Q\\tag};
            \node[right=of tag, block] (len) {Länge};
            \node[right=of len, block] (data) {Daten:\\Layer 2 Paket};
            \node[right=of data, block] (crc) {CRC};
            %
            \node[block] (idstmac) at ($(dstmac.north) + (0.5,1)$) {Dst\\MAC};
            \node[right=of idstmac, block] (isrcmac) {Src\\MAC};
            \node[right=of isrcmac, block] (itag) {802.1Q\\tag};
            \node[right=of itag, block] (ilen) {Länge};
            \node[right=of ilen, block] (idata) {Daten};
            \node[right=of idata, block] (icrc) {CRC};
            %
            \draw (idstmac.south west) -- (data.north west);
            \draw (icrc.south east) -- (data.north east);
    \end{tikzpicture}
    \caption{802.1ah MAC-in-MAC}
\end{minipage}
\begin{minipage}[b]{0.55\textwidth}
    \begin{tikzpicture}[
            block/.style={rectangle, draw=black!50, thick, align=center, font=\tiny, minimum height=0.8cm},
            node distance=-\pgflinewidth,
        ]
            \node[block] (dstmac) {Dst\\MAC};
            \node[right=of dstmac, block] (srcmac) {Src\\MAC};
            \node[right=of srcmac, block, fill=blue!20] (ovpid) {0x9100};
            \node[right=of ovpid, block, fill=blue!20] (ovid) {Outer\\Tag};
            \node[right=of ovid, block] (ivpid) {0x8100};
            \node[right=of ivpid, block] (ivid) {Inner\\Tag};
            \node[right=of ivid, block] (len) {Länge};
            \node[right=of len, block] (data) {Daten};
            \node[right=of data, block] (crc) {CRC};
            %
            \node (vpidl) at ($(ovid.south east) + (0,-1)$) {VLAN Protocol ID};
            \draw[->] (vpidl) -- (ovpid.south);
            \draw[->] (vpidl) -- (ivpid.south);
    \end{tikzpicture}
    \caption{IEEE 802.1ad Q-in-Q}
\end{minipage}
\end{figure}

\subsection{Multiprotocol Label Switching (MPLS)}
\begin{description}
    \item[Ingress-Router] labeln eingehende Pakete anhand ihrer Zieladresse und ihrer Herkunft
    \item[Switche] routen Pakete anhand ihrer Label und labeln sie um.
    \item[Egress-Router] entfernen Label von Paketen, sendet sie anhand dieser in externes Netz weiter.
    \item[Label] bestimmen pro Punkt-zu-Punkt-Verbindung eindeutig die Route.
\end{description}

\begin{table}[ht]
\begin{minipage}{0.5\textwidth}
	\centering
	\begin{tabular}{c|c|c}
		in & dest & out\\
		\hline
		(Port,Label) & IP & (Port,Label)\\
		... & ... & ...
	\end{tabular}
	\caption{Ingress/Egress Routingtabelle}
\end{minipage}
\begin{minipage}{0.5\textwidth}
	\centering
	\begin{tabular}{c|c}
		in & out\\
		\hline
		(Port,Label)  & (Port,Label)\\
		... & ...
	\end{tabular}
	\caption{Switch Routingtabelle}
\end{minipage}
\end{table}

\subsection{SONET/SDH}
\begin{description}
    \item[SONET:] Synchronous Optical Network
    \item[SDH:] Synchronous Digital Hierarchy
\end{description}
Beide Technologien werden zur Bündelung mehrerer Datenströme (z.B. Telefonverbindungen) eingesetzt. Dabei besteht jeder SONET-Basisrahmen aus je einenm Bit per Datenstrom und Overhead (9 Zeilen, 87 Spalten Nutzdaten, 3 Spalten Overhead $\Rightarrow$ 783 parallele Datenströme).

\begin{tabular}{|ll|l|lll|}
    \hline
    \multicolumn{2}{|c|}{SONET} & SDH & \multicolumn{3}{|c|}{Datenrate ($\frac{\text{Mbit}}{\text{s}}$)}\\
    elektrisch & optisch & optisch & gesamt & SPE & User\\
    \hline
    STS-1 & OC-1 & STM-0 & 51,84 & 50,112 & 49,536 \\
    STS-3 & OC-3 & STM-1 & 155,52 & 150,336 & 148,608 \\
    - & - & STM-2 & 311,04 & 300,672 & 297,216 \\
    STS-9 & OC-9 & STM-3 & 466,56 & 451,008 & 445,824 \\
    STS-12 & OC-12 & STM-4 & 622,08 & 601,344 & 594,432 \\
    STS-18 & OC-18 & STM-6 & 933,12 & 902,016 & 891,648 \\
    STS-24 & OC-24 & STM-8 & 1244,16 & 1202,688 & 1188,864 \\
    STS-36 & OC-36 & STM-12 & 1866,24 & 1804,032 & 1783,296 \\
    STS-48 & OC-48 & STM-16 & 2488,32 & 2405,376 & 2377,728 \\
    STS-96 & OC-96 & STM-32 & 4976,64 & 4810,752 & 4755,456 \\
    STS-192 & OC-192 & STM-64 & 9953,28 & 9621,504 & 9510,912 \\
    STS-256 & OC-256 & - & 13271,04 & 12828,672 & 12681,216 \\
    STS-384 & OC-384 & STM-128 & 19906,56 & 19243,008 & 19021,824 \\
    STS-768 & OC-768 & STM-256 & 39813,12 & 38486,016 & 38043,648 \\
    STS-1536 & OC-1536 & STM-512 & 79626,24 & 76972,032 & 76087,296 \\
    STS-3072 & OC-3072 & STM-1024 & 159252,48 & 153944,064 & 152174,592\\
    \hline
\end{tabular}

\vspace{5mm}
\begin{minipage}{0.45\textwidth}
    \begin{description}
        \item[STS:] Synchronous Transport Signal
        \item[OC:] Optical Carrier
    \end{description}
\end{minipage}
\begin{minipage}{0.1\textwidth}
    \hfill
\end{minipage}
\begin{minipage}{0.45\textwidth}
    \begin{description}
        \item[STM:] Synchronous Transfer Mode
        \item[SPE:] Synchronous Payload Envelope
    \end{description}
\end{minipage}

\subsection{OTN (Optical Transport Network)}
\begin{minipage}{0.6\textwidth}
	Kann SONET/SDH- oder anderen Traffic (Ethernet, MPLS, ...) über optische Verbindung transportieren. Datenübertragung basiert auf DWDM.
\end{minipage}
\hspace{0.1\textwidth}
\begin{minipage}{0.3\textwidth}
	\begin{tabular}{|l|l|}
		\hline
		Variante & Max. Datenrate ($\frac{\text{Gbit}}{\text{s}}$)\\
		\hline
		OTU-1 & 2,7\\
		OTU-2 & 10,7\\
		OTU-3 & 43,0\\
		OTU-4 & 112,0\\
		\hline
	\end{tabular}
\end{minipage}

\subsection{Rahmenbildung}
Zwischen Rahmenbegrenzungsfeldern werden beliebige Bits übertragen. Problem, wenn Bitfolge der Rahmenbegrenzung in den Daten vorkommt. Lösung durch Bit-Stuffing (nach jeder fünften 1 wird eine 0 eingefügt) oder Byte-Stuffing (vor Bitfolge, welche Rahmenbegrenzung entspricht, wird Escape-Zeichen eingefügt).

\section{Vermittlungsschicht}
\subsection{Dijkstra}
\begin{samepage}
\begin{description}
    \item[Dijkstra-Algorithmus] Algorithmus zur Ermittlung der kürzesten Pfade von einem Startknoten aus in (nicht-negativ) gewichtetem Graphen
    \item[Gegeben] Graph mit gewichteten Kanten, Startknoten S
    \begin{enumerate}
        \item Knotenvorrat := \{S\}
        \item aktiver Knoten := S
        \item aktive Routen := \{(S-S; 0)\}
        \item festgeschriebene Routen := $\emptyset$
        \item Solange Knotenvorrat nicht leer:
        \begin{itemize}
            \item Entferne kürzeste Route R aus aktiven Routen und füge R festgeschriebenen Routen hinzu
            \item Mache Ziel von R zum aktiven Knoten A und entferne A aus Knotenvorrat
            \item Für jeden Knoten K, zu dem keine Route festgeschrieben ist, mit Kante zu A:
            \begin{itemize}
                \item Füge K zum Knotenvorrat hinzu
                \item Füge (R-K; gewicht(R)$+$gewicht(A-K)) den aktiven Routen hinzu
            \end{itemize}
            \item Falls mehrere Pfade mit gleichem Ziel in Routen: entferne längere Pfade
        \end{itemize}
    \end{enumerate}
    \item[Knotenausfall] Setze alle Kantengewichte am ausgefallenen Knoten auf $\infty$
    \item[Ergebnis:] Baum mit Wurzel am Startknoten \textbf{(Sink Tree)}
\end{description}
\end{samepage}

\subsection{IP}
\begin{description}
    \item[IPv4:] 32 bit
    \samepage{
        \item[Private Adressbereiche:]\hfil
        \begin{itemize}
            \item \texttt{10.0.0.0/8} 1 Class-A Netz
            \item \texttt{172.16.0.0/12} 16 Class-B Netze
            \item \texttt{192.168.0.0/16} 256 Class-C Netze
        \end{itemize}
    }
    \item[IPv6:] 128 bit
\end{description}

\subsubsection{Classless Inter-Domain Routing (CIDR)}
\begin{tikzpicture}[
    node distance=-\pgflinewidth,
    ttt/.style={inner sep=0.1,outer sep=0, font=\tt\footnotesize},
    every node/.style={font=\footnotesize}
]
    \node[ttt] (ip) {10.42.23.1} ;
    \node[left=of ip] (cidr) {CIDR Notation:};
    \node[right=of ip, ttt] (slash) {/};
    \node[right=of slash, ttt] (nms) {22};

    \node[ttt, anchor=west] (nmo) at ($(nms) + (2.5,-0.5)$) {11111111.11111111.111111};
    \node[left=of nmo] (nml) {Netzmaske:};
    \node[right=of nmo, ttt] (nmz) {00.00000000};
    \node[ttt, anchor=west] at ($(nmz.east) + (0.2,0)$) { = 255.255.252.0};

    \node[ttt, anchor=west] (ipb) at ($(nms) + (2.5,-1)$) {00001010.00101010.00010111.00000001};
    \node[left=of ipb] (ipl) {IP:};
    \node[ttt, anchor=west] at ($(ipb.east) + (0.2,0)$) { = 10.42.23.1};

    \draw  ($(ipb.south west) + (0,-0.3)$) node[left] {\bf \&} --($(ipb.south east) + (0,-0.3)$);

    \node[ttt, anchor=west] (sna) at ($(nms) + (2.5,-1.8)$) {00001010.00101010.00010100.00000000};
    \node[left=of sna] {Subnetzadresse:};
    \node[ttt, anchor=west] at ($(sna.east) + (0.2,0)$) { = 10.42.20.0};

    \draw[decoration={brace,raise=2pt},decorate] (nmo.north west) -- (nmo.north east);
    \draw[->] (nms.east) -| ($(nmo.north) + (0,0.2)$);

    \draw[decoration={brace,raise=2pt,mirror},decorate] (ip.south west) -- (ip.south east);
    \draw[->] ($(ip.south) + (0,-0.2)$) |- (ipl.west);
\end{tikzpicture}

\subsubsection{IPv4-Paket}
\begin{tikzpicture}[
            block/.style={rectangle, draw=black!50, thick, align=center, font=\tiny, minimum height=0.8cm},
            node distance=-\pgflinewidth,
        ]
        \node[block] (ver) {Version\\(4 bit)};
        \node[block, right=of ver] (ihl) {IHL\\(4 bit)};
        \node[block, right=of ihl] (tos) {ToS\\(8 bit)};
        \node[block, right=of tos] (tl) {TL\\(16 bit)};
        \node[block, right=of tl] (id) {ID\\(16 bit)};
        \node[block, right=of id] (fl) {Flags\\(3 bit)};
        \node[block, right=of fl] (fo) {FO\\(13 bit)};
        \node[block, right=of fo] (ttl) {TTL\\(8 bit)};
        \node[block, right=of ttl] (prot) {Protocol\\(8 bit)};
        \node[block, right=of prot] (hc) {HC\\(16 bit)};
        \node[block, right=of hc] (src) {Src\\(32 bit)};
        \node[block, right=of src] (dst) {Dst\\(32 bit)};
        \node[block, right=of dst] (op) {Options/\\Padding};
        \node[block, right=of op] (pl) {Payload};
\end{tikzpicture}

\vspace{5mm}
\begin{minipage}{0.45\textwidth}
    \begin{description}
        \item[Version:] \textbf{IPv4}/IPv6
        \item[IHL:] Header Länge
        \item[ToS:] Type of Service (Bandbreiten-, Zuverlässigkeitsanforderungen, etc.)
        \item[TL:] Total Length
        \item[ID:] Eindeutige ID zu zusammensetzen fragmentierter Pakete
        \item[Flags:]\hfill
        \begin{description}
            \item[Bit 0:] reserviert
            \item[Bit 1:] Don't Fragment
            \item[Bit 2:] More Fragments
        \end{description}
    \end{description}
\end{minipage}
\begin{minipage}{0.1\textwidth}
\end{minipage}
\begin{minipage}{0.45\textwidth}
    \begin{description}
        \item[FO:] Fragment Offset (bezogen auf 8-Oktett-Blöcke)
        \item[TTL:] Time to Live (heute Anzahl der übrigen erlaubten Hops. Falls 0, so wird das Paket gedroppt.)
        \item[Protocol:] Eingeschlossenes Protokoll
        \item[HC:] Header Checksum
        \item[Src:] Herkunftsadresse
        \item[Dst:] Zieladresse
    \end{description}
\end{minipage}

\subsection{Routing}
\begin{description}
    \item[Longest Prefix Match] Wenn die Ziel-IP mit mehreren Routing-Einträgen übereinstimmt, so wird der Eintrag mit dem längsten übereinstimmenden Präfix ausgewählt. Das kann erreicht werden, indem man den Eintrag mit der größten Netzmaske wählt.
\end{description}

\begin{tikzpicture}[
    router/.style={
        minimum height=1cm,
        minimum width=1cm,
        rectangle,
        draw=black!50,
        thick,
        align=center
    }
]
    \node [cloud, draw,cloud puffs=10,cloud puff arc=120, aspect=2, inner ysep=1em] (inet) {Internet};
    \node[router, right= 3.5cm of inet] (r1) {Router};
    \node[router, right=2.5cm of r1] (s1) {L2 Switch};
    \node[router, above right=0.5cm and 0.75cm of s1] (c1) {Computer};
    \node[router, right=0.75cm of s1] (c2) {Computer};
    \node[router, below right=0.5cm and 0.75cm of s1] (c3) {Computer};
    
    \draw (inet) -- node[above right=0 and 0.5] {\ttfamily\tiny 141.76.4.16} node[below left=0 and -0.4] {\tt\tiny141.76.0.1} node[below right=0 and 0.7] {\tiny Port A} (r1);
    \draw (r1) -- node[above left=0 and -0.1] {\tt\tiny 141.76.130.1} node[below left=0 and 0.25] {\tiny Port B} (s1);
    \draw (s1) -- (c1);
    \draw (s1) -- (c2);
    \draw (s1) -- (c3);

    \node[router, fill=white] (gw) at ($(inet.east) + (0.2, 0)$) {Gateway\\Router};        
    \node[above=0 of s1] {\tt\tiny 141.76.130.0/24};
    \node[above=0 of c1] {\tt\tiny 141.76.130.3};
    \node[above=0 of c2] {\tt\tiny 141.76.130.42};
    \node[above=0 of c3] {\tt\tiny 141.76.130.23};
    
    \node[below=0.25 of r1, rectangle, draw=black!50,] (rt) {
        \footnotesize\tt
        \begin{tabular}{lll}
            C & 141.76.130.0/24 & Port B\\
            C & 141.76.0.0/16 & Port A\\
            S & 0.0.0.0/0 & 141.76.0.1
        \end{tabular}
    };
    
    \draw[decoration={brace,raise=2pt},decorate] (rt.north west) -- (rt.north east);
\end{tikzpicture}
\begin{description}
    \item[C\textit{onnected}:] Das Subnetz liegt direkt am angegebenen Port an
    \item[S\textit{tatic}:] Das Subnetz ist über das angegebene Gateway erreichbar
    \item[D\textit{ynamic}:] Das Gateway wird dynamisch ermittelt (z.B. OSPF)
\end{description}

\section{Transportschicht}

\begin{description}
    \item[Port] Mechanismus für eine Anwendung-zu-Anwendung-Übertragung.
    %
    \item[UDP (\textit{User Datagram Protocol})] verbindungsloses Protokoll nach dem \textit{Best Effort}-Prinzip. Implementierung von \textit{Ports}.
    %
    \item[Verbindung] Kanal, in dem zusammengehörige Pakete verschickt werden. Der Erhalt und die richtige Reihenfolge werden garantiert.
    %
    \item[TCP (\textit{Transmission Control Protocol})] verbindungsbehaftetes Protokoll mit Ende-zu-Ende-Sicherung. Implementierung von \textit{Verbindungen}.
\end{description}

\begin{figure}[ht]
\begin{minipage}{0.3\textwidth}
\begin{tikzpicture}
    \draw (0,0.3) node[draw, minimum height=6mm, minimum width=16mm] {Initiator} (0,0) -- (0,-5);
    \draw (5,0.3) node[draw, minimum height=6mm, minimum width=16mm] {Responder} (5,0) -- (5,-5);
    %
    \draw[->] (0,-0.5) -- (5,-0.7)
    node[above,sloped,pos=0.5]{SYN(seq = x)};
    \draw[->] (5,-1.5) -- (0,-1.7)
    node[above,sloped,pos=0.5]{SYN+ACK(seq=y,ack=x + 1)};
    \draw[->] (0,-2.5) -- (5,-2.7)
    node[above,sloped,pos=0.5]{ACK(seq=x+1,ack=y+1)};
    \draw[->] (0,-3.5) -- (5,-3.7)
    node[above,sloped,pos=0.5]{DATA(seq=x+1,data=S)};
    \draw[->] (5,-4.5) -- (0,-4.7)
    node[above,sloped,pos=0.5]{ACK(seq=y+1,ack=x+1+S)};
    %
    \draw[very thick, loosely dotted] (2.5,-5) -- (2.5,-5.5);
    \draw (0,-5.5) -- (0,-8.5);
    \draw (5,-5.5) -- (5,-8.5);
    %
    \draw[->] (0,-6) -- (5,-6.2)
    node[above,sloped,pos=0.5]{FIN(seq=z)};
    \draw[->] (5,-7) -- (0,-7.2)
    node[above,sloped,pos=0.5]{FIN+ACK(seq=w,ack=z+1)};
    \draw[->] (0,-8) -- (5,-8.2)
    node[above,sloped,pos=0.5]{ACK(seq=z+1,ack=w+1)};
    %
    \draw[decoration={brace,raise=4pt},decorate] (5,-0.5) -- node[right=6pt] {\rotatebox{-90}{\footnotesize 3-Wege-Handshake}} (5,-2.9);
\end{tikzpicture}
\end{minipage}
%
\begin{minipage}{0.3\textwidth}
    \hfill
\end{minipage}
%
\begin{minipage}{0.35\textwidth}
\begin{tikzpicture}
    \draw (0,0.3) node[draw, minimum height=6mm, minimum width=16mm] {Initiator} (0,0) -- (0,-3);
    \draw (5,0.3) node[draw, minimum height=6mm, minimum width=16mm] {Responder} (5,0) -- (5,-3);
    %
    \draw[->] (0,-0.5) -- (5,-0.7)
    node[above,sloped,pos=0.2]{ConReq(P)}
    node[above,sloped,pos=0.8]{ConInd(P)};
    \draw[->] (5,-1.5) -- (0,-1.7)
    node[above,sloped,pos=0.2]{ConRsp(P)}
    node[above,sloped,pos=0.8]{ConCnf(P)};
    \draw[->] (0,-2.5) -- (5,-2.7)
    node[above,sloped,pos=0.2]{DatReq}
    node[above,sloped,pos=0.8]{DatInd};
\end{tikzpicture}
\caption{Quality-of-Service mit dem Parameter $P$}
\end{minipage}
\end{figure}

\begin{description}
    \item[Slow Start]
    \begin{samepage}
    Algorithmus zur Flusskontrolle bei TCP.
    \begin{enumerate}
        \item Fenstergröße := Segmentgröße
        \item Bei Erhalt eines ACKs:
        \begin{itemize}
            \item Falls Fenstergröße $<$ Schwellenwert: Fenstergröße *= 2
            \item Falls Fenstergröße $<$ Empfangsfenser: Fenstergröße += Segmentgröße
            \item Gehe zu 2.
        \end{itemize}
        \item Bei einem Timeout:
        \begin{itemize}
            \item Schwellenwert := Fenstergröße / 2
            \item Gehe zu 1.
        \end{itemize}
    \end{enumerate}
    \end{samepage}
    %
    \item[Schiebefensterprotokoll]
    \begin{samepage}
    Effizienzsteigerung, indem man $F$ viele Pakete hintereinander versendet, ohne auf die Bestätigung des vorherigen Pakets warten zu müssen. (\textit{Stop-and-Wait ist wie ein Schiebefensterprotokoll mit $F = 1$})\\
    Bei Fenstergröße $n$ werden Laufnummern $0...n$ vergeben, damit bei wiederholtem Senden von $F0$ (ACK war verloren) der Empfänger das nicht als $F0$ im zweiten Durchlauf akzeptiert, da er noch auf $Fn$ wartet.
    \bigskip \\
    Bei Erhalt eines Pakets mit falscher Sequenznummer (Empfangs- = Sendereihenfolge!): \\
    \textbf{Go-Back-N:}
    \begin{itemize}
        \item Empfänger verwirft das Paket
        \item Nach einem Timeout muss der Sender alle unbestätigten Pakete erneut senden
    \end{itemize}
    %
    \textbf{Selective Repeat:}
    \begin{itemize}
        \item Empfänger speichert das Paket zwischen und sendet ein ACK mit der Sequenznummer des ersten fehlenden Pakets an den Sender
        \item Nach einem Timeout wird das Paket mit dieser Sequenznummer erneut gesendet
    \end{itemize}
    \end{samepage}
\end{description}

\section{Performance}

\begin{description}
    \item[Fairness] Alle Teilnehmer haben die gleiche Chance, heranzukommen.
    %
    \item[Max-Min-Fairness] Jeder bekommt gleich viel\footnote{Oder gewichtet: Jeder bekommt $\frac{\text{eigenes Gewicht}}{\text{Summe aller Gewichte}}$ viel} aus dem Topf. Hat jemand mehr als er braucht, kommt der Überschuss wieder in den Topf. Dieser Algorithmus wird wiederholt bis alle gesättigt sind oder der Topf leer ist.
    %
    \item[Choke-Verfahren] Überlaststeuerung an Gateways. Wenn eingehender Traffic größer als möglicher ausgehender ($\text{Last}>\text{Schwellwert}$) ist, wird Choke-Paket gesendet, um Sender zum Stoppen aufzufordern.
    \begin{description}
    	\item[Lastberechnung] $\text{Last}_{\text{neu}} = a \cdot \text{Last}_{\text{alt}} + (1 - a) \cdot \text{Last}_{\text{gemessen}} \hs{1cm} a \ldots \text{Anpassungsfaktor}$
	\end{description}
    %
    \item[Bandwidth Delay Product] $\text{BDP} = b \cdot T = b \cdot \frac{d}{v} \hs{1cm} b \ldots \text{Bitrate}, d \ldots \text{Kabellänge}, v \ldots \text{Übertragunsgeschw.}$ (Menge an Daten, die sich auf der Leitung befinden)
    %
    \begin{samepage}
    \item[Worst-Case-Paketeffizienz mit $F = 64$] \hfill
    \begin{itemize}
        \item Fast Ethernet: \texttt{8 Byte SDL | 64 Byte Frame | 12 Byte IFG}
        \item Gigabit: \texttt{8 Byte SDL | 64 Byte Frame | 448 Byte Padding | 8 Byte IFG}
        \item Gigabit mit Bursting: \texttt{Padding} und \texttt{IFG} tauschen, um Bursting anzuzeigen; dann beliebig viele \footnote{Maximale Framelänge darf nicht überschritten werden: 1518 Bytes (normal) oder 8192 Bytes (Jumbo)} \texttt{8 Byte SDL | 64 Byte Frame | 8 Byte IFG} Blöcke anfügen.
        \item $\eta_{\text{frame}} = \frac{\text{Framebytes}}{\text{Gesamtbytes}}$
    \end{itemize}
    \end{samepage}
\end{description}

\begin{tabular}{c|c|c}
	Technik & IFG & Mindestframegröße\\
	\hline
	Ethernet & 47 Bit & 64 Byte\\
	Fast Ethernet & 12 Byte & 64 Byte\\
	Gigabit Ethernet & 8 Byte & 512 Byte\\
	10GB Ethernet & 5 Byte & \\
\end{tabular}

\section{Internetdienste}

\begin{description}
    \item[URL (\textit{Uniform Resource Locator})] $\underbrace{\text{http}\sphantom}_{\text{Protokoll}}\text{://}\underbrace{\text{www}\sphantom}_{\text{Host}}\text{.}\underbrace{\text{inf}\sphantom}_{\text{Subdomain}}\text{.}\underbrace{\text{tu-dresden}\sphantom}_{\text{Domain}}\text{.}\underbrace{\text{de}\sphantom}_{\text{TLD}}\underbrace{\text{/test/index.html}}_{\text{Resource}}$ \\
    %
    \textit{(Im weiteren wird die Kombination einer Teilmenge aus Host, Subdomain, Domain und TLD als \host bezeichnet.)}
    %
    \item[DNS (\textit{Domain Name System})]
    \begin{samepage}
    System zum Auflösen von {\host}s zu IPs.
    \begin{itemize}
        \item Client sendet Ziel-\host an den lokalen DNS-Server, dieser kümmert sich um Namensauflösung und liefert Ergebnis zurück
        \item Lokaler DNS-Server befragt entsprechend Namenshierarchie höhere/niedere DNS-Server nach dem \host, falls ihm IP unbekannt
        \item DNS-Root-Server für Top Level Domains
        \item \textbf{Rekursiver Ansatz:} \texttt{lookup(rootServer, host)} \\
            \texttt{lookup(server, host):}
            \begin{itemize}
                \item Falls \host als IP vorliegt, gebe sie aus
                \item Sonst gebe \texttt{lookup(server', host)} aus, \\
                wobei \texttt{server'} der zuständige DNS-Server ist
            \end{itemize}
        \item \textbf{Iterativer Ansatz:}
            \begin{itemize}
                \item Root-Server sendet dem lokalen Server die IP des nächsten zuständigen DNS-Servers
                \item Lokaler Server muss diesen dann befragen usw.
                \item Der letzte zuständige Server sendet dann die IP des {\host}s
            \end{itemize}
        \item Lokaler DNS-Server sendet die Ziel-IP an den Client
        \item \textit{Jeder DNS-Server kann die Antworten übergeordneter DNS-Server cachen}
    \end{itemize}
    \end{samepage}
\end{description}

\begin{tabular}{>{\tt}l>{\tt}l>{\tt}l>{\tt}l>{\tt}l}
    NAME & TTL & CLASS & TYPE & VALUE \\ \hline
    jupiter & 86400 & IN & A & 117.186.1.1 \\
    jupiter & 86400 & IN & AAAA & 2001:db8:85a3:8d3::1 \\
    zeus & 86400 & IN & CNAME & jupiter \\
    rn-edu.de. & 86400 & IN & NS & jupiter \\
    \_sip.\_tcp.rn-edu.de. & 86400 & IN & SRV & 0 0 5060 jupiter
\end{tabular}

\begin{description}
    \item[ARP (\textit{Address Resolution Protocol})] Protokoll zum Abbilden von IP-Adressen auf MAC-Adressen: Man sendet einen ARP-Request mit der IP als Broadcast über Ethernet. Der Netzwerkteilnehmer mit der entsprechenden IP antwortet mit seiner MAC.
    %
    \item[Base64] Kodierung zur ASCII-Übertragung von Binärdaten (\textit{z.B. bei E-Mail}). 3 Bytes ($3 \cdot 8 bit$) werden jeweils zu 4 Base64-Zeichen ($4 \cdot 6 bit$) umgewandelt. Unvollständige 3-Byte-Blöcke werden durch Padding trotzdem zu einem 4er-Base64-Block.
    %
    \item[SMTP (\textit{Simple Mail Transfer Protocol})] Protokoll zum Senden von E-Mails an einen Server.
    %
    \item[POP3 (\textit{Post Office Protocol 3})] Protokoll zum Herunterladen von E-Mails von einem Server (\textit{Server wird entlastet}).
    %
    \item[IMAP (\textit{Internet Message Access Protocol})] Protokoll zum selektiven Abrufen von E-Mails von Servern (\textit{E-Mail bleibt auf dem Server}).
    %
    \item[SNMP (\textit{Simple Network Management Protocol})] Protokoll zum einheitlichen Konfigurieren und Verwalten von Netzwerkgeräten.Nachrichtentypen: \texttt{GET}, \texttt{GETNEXT}, \texttt{GETBULK}, \texttt{SET}, \texttt{RESPONSE}, \texttt{TRAP}
\end{description}

\section{Multimediakommunikation}

\begin{description}
    \item[Lauflängenkodierung] Wenn sich ein Byte mindestens $S$ mal wiederholt ($S \ldots \text{Schwellenwert}$), wird es wie folgt kodiert: \texttt{Byte | Marke | Anzahl - S}. Die anderen Bytes bleiben unverändert.
    %
    \item[Huffman-Kodierung] \hfill
    \begin{samepage}
    \begin{enumerate}
        \item Zu kodierende Zeichen (\textit{Knoten}) ihrer Wahrscheinlichkeit nach aufsteigend ordnen
        \item Die beiden Knoten mit den niedrigsten Wahrscheinlichkeiten zu einem neuen Knoten verbinden und die Wahrscheinlichkeiten addieren
        \item Falls noch keine Wurzel entstanden ist: Gehe zu 2.
        \item Beschrifte alle Rechtsabzweigungen mit einer Zahl (0 oder 1) und alle Linksabzweigungen mit der jeweils anderen Zahl
        \item Kodierung eines Zeichens: Beschriftungen auf dem Pfad von de Wurzel zum Zeichen
    \end{enumerate}
    \end{samepage}
    %
    \item[SIP (\textit{Session Initiation Protocol})] Protokoll zum Aufbauen von VoIP-Sessions, meist über SIP-Proxys. Es verwendet das SDP (\textit{Session Description Protocol}), was eigentlich nur eine Beschreibungssprache und \textit{kein} Protokoll ist.
    %
    \item[RTP (\textit{Real-time Transport Protocol})] Protokoll zur effizienten Übertragung von Audio- und Videodaten. Flusskontrolle und Quality-of-Service werden vom RTCP (\textit{Real-time Transport Control Protocol}) übernommen.
    %
    \item[RTCP (\textit{Real-Time Control Protocol})] Steuerung des Transports, z.B.\ Anpassung der Übertragungsrate
    \item[MCU (\textit{Multipoint Control Unit})] Teilnehmer senden ihren Stream nur an MCU, welche den Stream an die anderen Teilnehmer verteilt. Ohne MCU sendet jeder Teilnehmer seinen Stream an jeden anderen Teilnehmer.
\end{description}
\begin{itemize}
	\item Übergang von VoIP zu analoger Telefonie (PSTN, Public Switched Telephone Network) über Mediagateways bei Provider
\end{itemize}

\section{Verteilte Systeme}

\begin{description}
    \item[RPC (\textit{Remote Procedure Call})] Aufruf einer Funktion auf einem entfernten Rechner.
    \item[Stub] Schnittstelle zwischen den Anwendungen und dem Transportsystem. Sie (de)kodiert die Aufrufe und Ergebnisse.
    \item[RPC-Bindevorgang] Der RPC-Server wird über Direktadressierung, Broadcast oder einen Verzeichnisdienst ausfindig gemacht. Nach dem Binding können RPCs gesendet werden.
\end{description}

\begin{tabular}{l|l|l|l}
    Fehlersemantik & Bei Fehler & Filterung von Duplikaten & Bei Client- oder Serverfehler \\ \hline
    maybe & kein Neusenden & keine & kein Neusenden \\
    at-least-once & Neusenden & keine & kein Neusenden \\
    at-most-once & Neusenden & ja & kein Neusenden \\
    exactly-once & Neusenden & ja & Neusenden
\end{tabular}

\begin{description}
    \item[ACID-Prinzip] \hfill
    \begin{samepage}
    \begin{itemize}
        \item \textbf{A}tomicity: Transaktionen werden ganz oder gar nicht ausgeführt.
        \item \textbf{C}onsistency: Transaktionen führen von konsistenten Zuständen zu konsistenten Zuständen.
        \item \textbf{I}solation: Parallele Transaktionen beeinflussen sich nicht gegenseitig.
        \item \textbf{D}urability: Erfolgreiche Transaktionen werden persistiert.
    \end{itemize}
    \end{samepage}
    %
    \item[2PC (\textit{2-Phase Commit Protocol})]
    \begin{samepage}
    Protokoll zur Umsetzung von \textit{ACID} in verteilten Systemen.
    \begin{enumerate}
        \item Voting-Phase:
        \begin{itemize}
            \item Koordinator sendet \texttt{C\_BEGIN} an alle Teilnehmer
            \item Jeder Teilnehmer führt die Transaktion aus (und speichert sich Undo-Informationen)
            \item Koordinator sendet \texttt{C\_PREPARE} an alle Teilnehmer
            \item Jeder Teilnehmer sendet entweder \texttt{C\_READY} wenn sie der Transaktion zustimmen oder \texttt{C\_REFUSE} wenn nicht
        \end{itemize}
        \item Commit-Phase:
        \begin{itemize}
            \item Koordinator sendet \texttt{C\_COMMIT} genau dann wenn alle Teilnehmer zugestimmt haben; sonst sendet er \texttt{C\_ROLLBACK} (\textit{auch bei einem Timeout})
            \item Jeder Teilnehmer persistieren den Zustand bzw. setzen die Änderungen zurück
            \item Jeder Teilnehmer sendet \texttt{ACK} zum Koordinator
        \end{itemize}
    \end{enumerate}
    \end{samepage}
    %
    \item[SOAP (\textit{Simple Object Access Protocol})] Protokoll zum Arbeiten mit Ressourcen auf Webservern. Es nutzt HTTP mit einem XML-Body.
    %
    \item[REST (\textit{Representational State Transfer})] Paradigma um mit Ressourcen auf Webservern zu arbeiten mithilfe von zustandslosen Operationen.
\end{description}

\section{Mobile Computing}

\begin{description}
    \item[Zellulares Netzwerk]
    \begin{samepage}
    Das Frequenzband wird in unterschiedliche Teilfrequenzen aufgeteilt. Nachbarzellen nutzen andere Teilfrequenzen zur Vermeidung von Interferenzen. Das entstehende Muster (\textit{Cluster}) wird wiederholt.
    %
    \begin{itemize}
        \item Je größer die Zelle, desto weniger Kanäle pro Fläche
        \item Je größer die Zelle, desto größer die benötigte Sendeleistung und Interferenzzone
        \item $R \ldots \text{Radius der Zelle}$, Interferenzradius = $5R$
        \item $D = R \cdot \sqrt{3k} \hs{1cm} D \ldots \text{Abstand Basisstationen gleicher Zellen}, k \ldots \text{Anzahl der Zelltypen}$
    \end{itemize}
    \end{samepage}
    %
    \item[DHCP (\textit{Dynamic Host Configuration Protocol})]
    \begin{samepage}
    Protokoll zum automatischen Verteilen von IP-Adressen und Parametern wie DNS-Servern und Gateways.
    \begin{enumerate}
        \item Client sendet \texttt{DHCPDISCOVER} als Broadcast und erhält \texttt{DHCPOFFER}
        \item Client sendet \texttt{DHCPREQUEST} an einen der DHCP-Server und erhält \texttt{DHCPACK} mit den Zeiten T (\textit{Lease time}) und T1 (\textit{50\% T}) T2 (\textit{87.5\% T})
        \item Wenn T1 abläuft, sendet der Client \texttt{DHCPREQUEST} an den momentanen DHCP-Server, um das Lease der momentanen IP zu verlängern
        \item Wenn T2 abläuft, sendet der Client \texttt{DHCPREQUEST} als Broadcast, um das Lease der momentanen IP zu verlängern
        \item Wenn Client \texttt{DHCPACK} erhält (3. oder 4.), werden T, T1 und T2 aktualisiert (gehe zu 3.)
        \item Wenn T abläuft oder der Client \texttt{DHCPNACK} erhält (3. oder 4.), verliert er die IP und bricht den Netzwerkverkehr ab (gehe 1.)
    \end{enumerate}
    \end{samepage}
    %
    \item[Mobile IP]
    \begin{samepage}
    Protokoll um mobile Internetnutzer über eine statische IP adressieren zu können.
    \begin{itemize}
        \item Jeder \textit{Mobile Host} (MH) ist bei einem \textit{Home Agent} (HA) angemeldet
        \item Der HA bildet die statische IP (\textit{Home Address}) auf die dynamische \textit{Care-of Address} (COA) des MH ab
    \end{itemize}
    %
    \textbf{Foreign-Agent COA:}
    \begin{itemize}
        \item MH meldet sich beim \textit{Foreign Agent} (FA) mit seiner IP und seinem HA an
        \item FA meldet sich beim HA an mit dem MH und der IP des FA (COA)
        \item HA kann nun Pakete an die \textit{Home Address} in Pakete vom HA zum FA verpacken und dorthin schicken; der FA packt sie aus und sendet sie zum MH
    \end{itemize}
    \textbf{Co-located COA:}
    \begin{itemize}
        \item MH meldet sich beim HA mit seiner IP (COA) an (MH braucht eine eindeutige IP)
        \item HA kann nun Pakete an die \textit{Home Address} in Pakete vom HA zum MH (COA) verpacken; der MH packt sie selber aus
    \end{itemize}
    \end{samepage}
\end{description}

\end{document}

